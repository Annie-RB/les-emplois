{% extends "layout/content.html" %}
{% load i18n %}
{% load bootstrap4 %}

{% block title %}{% trans "Candidatures reçues" %}{{ block.super }}{% endblock %}

{% block content %}

    <h1>{% trans "Candidatures reçues" %}</h1>

    <h2 class="text-muted">{{ siae.display_name }}</h2>

    <div class="row no-gutters">
        <div class="col-md-3 offset-md-9">
            <div class="ml-4"> <!-- add a left margin to align the button with each job application status. Not perfect... :( -->
              <button class="btn btn-info btn-sm dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                {% trans "Statut" %}
              </button>
              <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <form method="get" action="">
                    {% for choice in filters_form.states %}
                    <div class="form-check form-check-inline dropdown-item">
                        <input id="{{ choice.id_for_label }}" class="form-check-input" name="{{ choice.data.name }}" type="checkbox" value="{{ choice.data.value }}" {% if choice.data.selected %}checked=""{% endif %}>
                        <label for="{{ choice.id_for_label }}" class="form-check-label">{{ choice.choice_label }}</label>
                    </div>
                    {% endfor %}
                    <div class="dropdown-divider"></div>
                    <div class="text-center">
                          <button type="submit" class="btn btn-light">
                            {% trans "Appliquer" %}
                          </button>
                    </div>
                </form>
              </div> <!-- .dropdon-menu -->
            </div> <!-- .dropdown -->
        </div> <!-- .col-md-3 -->
    </div> <!-- .row -->

    {% if not job_applications_page %}
        <h2 class="font-weight-normal text-muted">
            {% trans "Aucune candidature pour le moment." %}
        </h2>
    {% endif %}

    {% for job_application in job_applications_page %}

        <br>

        <div class="card mb-3">

            {% include "apply/includes/list_card_header.html" with job_application=job_application %}

            {% include "apply/includes/list_card_body.html" with job_application=job_application %}

            <div class="card-footer">
                <a href="{% url 'apply:details_for_siae' job_application_id=job_application.id %}">
                    {% trans "Gérer la candidature" %}
                </a>
            </div>

        </div>

    {% endfor %}

    {% include "includes/pagination.html" with page=job_applications_page %}

{% endblock %}
